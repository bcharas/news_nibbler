{"ts":1367277260696,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"//Handles posting subscriptions to the topic page, and adding new ones via user input\n\n/*\n//moved to globals to init.js\n//constructor Feed moved to feed.js\n//delete_feed moved to feed.js\n//moved default_feed_directory to init.js\n*/\n\n\n//loops through user feeds and posts a subscription listing for each\n//changed name from publish_feed_directory\nfunction post_subscriptions(){\t\n\tvar directory = $(\"#feed_subs\");\n\tdirectory.empty();\n\t////console.log(\"user feeds length: \" + window.user_feeds.length);\n\tfor (var i = 0; i < window.user_feeds.length; i++){\n\t\tvar feed = window.user_feeds[i];\n\t\tpost_subscription_listing(feed, directory);\n\t}\n\t//console.log(\"directory complete\");\n}\n\n//posts the subscription listing for a given feed\n//changed name from publish_feed_listing\nfunction post_subscription_listing(feed, container){\n\tvar div = \"<div class='topic' \";\n\tdiv += \"id='\" + feed.feed_name + \"'></div>\"\n\tcontainer.append(div);\n\tvar to_publish = \"<div class='headline'\";\n\tto_publish += \">\";\n\tto_publish += feed.feed_name;\n\tto_publish += \"</div>\";\n    to_publish += \"<div class = 'date topic_link'>\";\n    to_publish += feed.feed_src;\n    to_publish += \"</div>\";\n\tvar published_div = $(\"#\" + feed.feed_name);\n\tpublished_div.selected = true;\n\tpublished_div.append(to_publish);\n\tfeed.ignore = false;\n\t\n\t\n\tvar delete_feed_html = \"<div id='\" + feed.feed_name + \"' class='delete_topic_button'> Unsubscribe </div>\";\n\tpublished_div.append(delete_feed_html);\n\t\n\tvar delete_this_feed = function(){\n\t\t\t\t\t\t\t\tdelete_feed(feed.feed_name);\n\t\t\t\t\t\t\t};\n\tvar delete_button = $(\"#\" + feed.feed_name);\n\tdelete_button.click(delete_this_feed);\n}\n\n//builds the box that allows users to subscribe to new feeds\n//changed name from custom_new_feed_entry\nfunction new_subscription_input(){\n\tvar directory = $(\"#browse\");\n\tvar div_html = \"<div class='snippet' \";\n\tdiv_html += \"id='custom_feed'><div class= 'headline'>Add another feed:</div> </div>\";\n\tdirectory.append(div_html);\n\tvar new_div = $(\"#custom_feed\");\n\tvar name_input = \"Name <input id='name_input' class='data'></input>\";\n\tvar url_input = \"<br/> Url<input id='url_input' class='data'></input>\";\n\tvar subscribe_button_html = \"<div id='generator_button'> Subscribe! </div>\";\n\tnew_div.append(name_input);\n\tnew_div.append(url_input);\n\tnew_div.append(subscribe_button_html);\n\t\n\tvar subscribe_button = $(\"#generator_button\");\n\tsubscribe_button.click(subscribe);\n\t\n}\n\n//called whenever a user presses subscribe, tries to subscribe to input feed\n//changed name from generate_feed\nfunction subscribe(){\n\tconsole.log(\"generating!\");\n\tvar input_name = $(\"#name_input\").val();\n\tvar input_url = $(\"#url_input\").val();\n\tif (input_name == \"\"){\n\t\tconsole.log(\"Feeds must be named before they can be added\");\n\t\treturn;\n\t}\n\tif (input_url == \"\"){\n\t\tconsole.log(\"No feed URL supplied for generator\");\n\t\treturn;\n\t}\n\t/*\n\tif (!(is_unique_feed(input_name, input_url))){\n\t\tconsole.log(\"Requested feed uses occupied name or url\");\n\t\treturn;\n\t}\n\ttest_potential_feed(input_name, input_url);\n\t*/\n\t\n\tadd_new_feed(input_name, input_url);\n\t\n}"]],"start1":0,"start2":0,"length1":0,"length2":3039}]],"length":3039}
{"contributors":[],"silentsave":false,"ts":1367279196346,"patch":[[{"diffs":[[0,"eds[i];\n"],[1,"        profile_subs(feed);\n"],[0,"\t\tpost_s"]],"start1":580,"start2":580,"length1":16,"length2":44},{"diffs":[[0," given feed\n"],[1,"function profile_subs(feed){\n    var container = $(\"#all_pages\");\n    var div = \"<div class='topic' \";\n\tdiv += \"id='\" + feed.feed_name + \"'></div>\"\n\tcontainer.append(div);\n\tvar to_publish = \"<div class='headline'\";\n\tto_publish += \">\";\n\tto_publish += feed.feed_name;\n\tto_publish += \"</div>\";\n    to_publish += \"<div class = 'date topic_link'>\";\n    to_publish += feed.feed_src;\n    to_publish += \"</div>\";\n\tvar published_div = $(\"#\" + feed.feed_name);\n\tpublished_div.selected = true;\n\tpublished_div.append(to_publish);\n\tfeed.ignore = false;\n}\n"],[0,"//changed na"]],"start1":744,"start2":744,"length1":24,"length2":566},{"diffs":[[0,"listing\n"],[1,"\n\n"],[0,"function"]],"start1":1331,"start2":1331,"length1":16,"length2":18},{"diffs":[[0,"_button."],[-1,"click"],[1,"onButtonTap"],[0,"(delete_"]],"start1":2156,"start2":2156,"length1":21,"length2":27}]],"length":3617,"saved":false}
{"ts":1367279291827,"patch":[[{"diffs":[[0,"v);\n"],[-1,"\tvar to_publish = \"<div class='headline'\";\n\tto_publish += \">\";\n\tto_publish += feed.feed_name;\n\tto_publish += \"</div>\";\n    to_publish += \"<div class = 'date topic_link'>\";\n    to_publish += feed.feed_src;\n    to_publish += \"</div>\";\n"],[0,"\tvar"]],"start1":924,"start2":924,"length1":241,"length2":8}]],"length":3384,"saved":false}
{"ts":1367279326037,"patch":[[{"diffs":[[0,"ppend(div);\n"],[1,"\n"],[0,"\tvar publish"]],"start1":916,"start2":916,"length1":24,"length2":25},{"diffs":[[0,"ue;\n"],[-1,"\tpublished_div.append(to_publish);\n"],[0,"\tfee"]],"start1":1003,"start2":1003,"length1":43,"length2":8}]],"length":3350,"saved":false}
{"ts":1367279380628,"patch":[[{"diffs":[[0,"ed.feed_name + \""],[1,"_prof"],[0,"'></div>\"\n\tconta"]],"start1":878,"start2":878,"length1":32,"length2":37},{"diffs":[[0,"\"_prof'></div>\"\n"],[-1,""],[0,"\tcontainer.appen"]],"start1":893,"start2":893,"length1":32,"length2":32},{"diffs":[[0,"d(div);\n"],[1,"\tvar to_publish = \"<div class='headline'\";\n\tto_publish += \">\";\n\tto_publish += feed.feed_name;\n\tto_publish += \"</div>\";\n    to_publish += \"<div class = 'date topic_link'>\";\n    to_publish += feed.feed_src;\n    to_publish += \"</div>\";"],[0,"\n\tvar pu"]],"start1":925,"start2":925,"length1":16,"length2":248},{"diffs":[[0,"+ feed.feed_name"],[1,"+\"_prof\""],[0,");\n\tpublished_di"]],"start1":1193,"start2":1193,"length1":32,"length2":40},{"diffs":[[0,"= true;\n"],[1,"\tpublished_div.append(to_publish);\n"],[0,"\tfeed.ig"]],"start1":1244,"start2":1244,"length1":16,"length2":51}]],"length":3630,"saved":false}
