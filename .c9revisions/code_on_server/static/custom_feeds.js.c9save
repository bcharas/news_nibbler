{"ts":1366816363281,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"window.user_feeds = [];\n//default_feed_directory();\n\nfunction Feed(name, url){\n\tthis.feed_name = name;\n\tthis.feed_src = url;\n\tthis.connection = new google.feeds.Feed(url);\n\twindow.user_feeds.push(this);\n}\n\nfunction default_feed_directory(){\n\twindow.user_feeds = [];\n\t//console.log(\"getting default directory...\");\n\tvar reddit = new Feed(\"Reddit\", \"http://www.reddit.com/.rss\");\t\n\tvar digg = new Feed(\"Digg\", \"http://www.digg.com/rss/index.xml\");\n\tvar cnn = new Feed(\"CNN\", \"http://rss.cnn.com/rss/cnn_topstories.rss\");\n//\tvar hacker_news = new Feed(\"Hacker_News\", \"https://news.ycombinator.com/rss\");\n  var cooking = new Feed(\"Cooking_with_Friends\", \"http://www.cookingwithfriendsclub.com/index.php?/rss/blog\");\n}\n\nfunction publish_feed_listing(feed, container){\n\tvar div = \"<div class='listing' \";\n\tdiv += \"id='\" + feed.feed_name + \"'></div>\"\n\tcontainer.append(div);\n\tvar to_publish = \"<br/><div class='headline'\"\n\tto_publish += \">\";\n\tto_publish += feed.feed_name;\n\tto_publish += \": \";\n\tto_publish += feed.feed_src;\n\tto_publish += \"</div>\";\n\tvar published_div = $(\"#\" + feed.feed_name);\n\tpublished_div.selected = true;\n\tpublished_div.append(to_publish);\n\tfeed.ignore = false;\n}\n\n\n/*\nfunction unignore_feed(div, feed){\n\t//window.numFeeds++;\n\t//console.log(\"unignoring feed\");\n\tfeed.ignore = false;\n\tif (div.hasClass(\"ignored_feed\")){\n\t\t//console.log(\"removing ignore class\");\n\t\tdiv.removeClass(\"ignored_feed\");\n\t}\n\tif (!(div.hasClass(\"listing\"))){\n\t\t//console.log(\"adding listing class\");\n\t\tdiv.addClass(\"listing\");\n\t}\n\tdiv.unbind('click', function(){\n\t\t\t\t\tunignore_feed(div, feed);\n\t\t\t\t});\n\tdiv.bind('click', function(){\n\t\t\t\tignore_feed(div, feed);\n\t\t\t});\n\trebuild_feeds();\n}\n\t\n\nfunction ignore_feed(div, feed){\n\t//window.numFeeds--;\n\t//console.log(\"ignoring feed\");\n\tfeed.ignore = true;\n\tif (div.hasClass(\"listing\")){\n\t\t//console.log(\"removing listing class\");\n\t\tdiv.removeClass(\"listing\");\n\t}\n\tif (!(div.hasClass(\"ignored_feed\"))){\n\t\t//console.log(\"adding ignore class\");\n\t\tdiv.addClass(\"ignored_feed\");\n\t}\n\tdiv.unbind('click', function(){\n\t\t\t\t\tignore_feed(div, feed);\n\t\t\t\t});\n\tdiv.bind('click',function(){\n\t\t\t\t\tunignore_feed(div, feed);\n\t\t\t});\n\t//console.log(\"attempting ignore on: \" + feed.feed_name + \" (current ignore status: \" + feed.ignore +\")\");\n\trebuild_feeds();\n}\n*/\nfunction publish_feed_directory(){\t\n\tvar directory = $(\"#browser_container\");\n\t////console.log(\"user feeds length: \" + window.user_feeds.length);\n\tfor (var i = 0; i < window.user_feeds.length; i++){\n\t\tvar feed = window.user_feeds[i];\n\t\tpublish_feed_listing(feed, directory);\n\t}\n\t//console.log(\"directory complete\");\n}\n\n// add feed to directory, then reload feed page\nfunction add_new_feed(name, url){\n\twindow.numFeeds++;\n\tnew Feed(name, url);\n\t//TODO: check that feed is not already in list\n\trebuild_feeds();\n}\n\n//delete existing feed from directory, then reload\nfunction delete_feed(name){\n\twindow.numFeeds--;\n\tfor (var i = 0; i < window.user_feeds.length; i++){\n\t\tvar feed = window.user_feeds[i];\n\t\tif (feed.feed_name == name){\n\t\t\twindow.user_feeds.splice(i, 1);\n\t\t\t//console.log(\"Feed '\" + name + \"' deleted successfully\");\n\t\t\trebuild_feeds();\n\t\t\treturn;\n\t\t}\n\t}\t\t\t\n}\n\n//button to reload feeds (more recent articles, update to changes in feeds)\nfunction rebuild_feeds(){\n\t//TODO: need a rebuild feet button\n\t//console.log(\"\\n\\nRESETING FEEDS...\");\n\twindow.this_feed_num = 0;\n\twindow.all_feeds_loaded = false;\n\twindow.has_published = false;\n\t$(\"#feed_container\").empty();\n\tload_all_feeds();\n}\n\nfunction custom_new_feed_entry(){\n\tvar directory = $(\"#browser_container\");\n\tvar div_html = \"<div class='listing' \";\n\tdiv_html += \"id='custom_feed'>Add another feed: </div>\";\n\tdirectory.append(div_html);\n\tvar new_div = $(\"#custom_feed\");\n\tvar name_input = \"<br/>Name: <input id='name_input'></input>\";\n\tvar url_input = \"Url:<input id='url_input'></input>\";\n\tvar feed_generator = \"<div id='generator_button'> Generate New Feed </div>\";\n\tnew_div.append(name_input);\n\tnew_div.append(url_input);\n\tnew_div.append(feed_generator);\n\t\n\tvar generator = $(\"#generator_button\");\n\tgenerator.click(generate_given_feed);\n}\n\nfunction generate_given_feed(){\n\tvar input_name = $(\"#name_input\").val();\n\tvar input_url = $(\"#url_input\").val();\n\tvar new_feed = new Feed(input_name, input_url);\n\t//TODO: given an input name, url, fetches a new feed and adds it to the rss reader\n\treturn;\n}\n\n//connect with user account via MongoDB\n\n//changes in deleted/additional feeds automatically shown on feed page\n\n"]],"start1":0,"start2":0,"length1":0,"length2":4456}]],"length":4456}
{"contributors":[],"silentsave":false,"ts":1366816508050,"patch":[[{"diffs":[[0,"= \"<"],[-1,"br/><"],[0,"div "]],"start1":884,"start2":884,"length1":13,"length2":8},{"diffs":[[0,"adline'\""],[1,";"],[0,"\n\tto_pub"]],"start1":901,"start2":901,"length1":16,"length2":17},{"diffs":[[0,"+= \""],[-1,": \";\n\t"],[1,"</div>\";\n    to_publish += \"<div class = 'date'>\";\n    "],[0,"to_p"]],"start1":974,"start2":974,"length1":14,"length2":63},{"diffs":[[0,"ed_src;\n"],[-1,"\t"],[1,"    "],[0,"to_publi"]],"start1":1054,"start2":1054,"length1":17,"length2":20}]],"length":4504,"saved":false}
{"ts":1366816558655,"patch":[[{"diffs":[[0," = 'date"],[1," center"],[0,"'>\";\n   "]],"start1":1016,"start2":1016,"length1":16,"length2":23}]],"length":4511,"saved":false}
{"ts":1366816621672,"patch":[[{"diffs":[[0,"ate "],[-1,"center"],[1,"topic_link"],[0,"'>\";"]],"start1":1021,"start2":1021,"length1":14,"length2":18}]],"length":4515,"saved":false}
{"ts":1366816691257,"patch":[[{"diffs":[[0," = \"<div class='"],[-1,"listing"],[1,"topic"],[0,"' \";\n\tdiv += \"id"]],"start1":771,"start2":771,"length1":39,"length2":37}]],"length":4513,"saved":false}
{"ts":1366817387940,"patch":[[{"diffs":[[0,"y = $(\"#"],[-1,"browser_container"],[1,"feed_subs"],[0,"\");\n\t///"]],"start1":2385,"start2":2385,"length1":33,"length2":25}]],"length":4505,"saved":false}
{"ts":1366817420939,"patch":[[{"diffs":[[0,"$(\"#"],[-1,"browser_container"],[1,"feed_subs"],[0,"\");\n"]],"start1":3574,"start2":3574,"length1":25,"length2":17}]],"length":4497,"saved":false}
{"ts":1366818645445,"patch":[[{"diffs":[[0,"ctory = $(\"#"],[-1,"feed_subs"],[1,"browse"],[0,"\");\n\tvar div"]],"start1":3566,"start2":3566,"length1":33,"length2":30}]],"length":4494,"saved":false}
{"ts":1366818711634,"patch":[[{"diffs":[[0," class='"],[-1,"listing"],[1,"add_remove_feed"],[0,"' \";\n\tdi"]],"start1":3609,"start2":3609,"length1":23,"length2":31}]],"length":4502,"saved":false}
{"ts":1366819195325,"patch":[[{"diffs":[[0,"m_feed'>"],[1,"<div class= 'headline'>"],[0,"Add anot"]],"start1":3660,"start2":3660,"length1":16,"length2":39},{"diffs":[[0,"er feed:"],[1,"</div>"],[0," </div>\""]],"start1":3700,"start2":3700,"length1":16,"length2":22}]],"length":4531,"saved":false}
{"ts":1366819255875,"patch":[[{"diffs":[[0,"ss='"],[-1,"add_remove_feed"],[1,"snippet"],[0,"' \";"]],"start1":3613,"start2":3613,"length1":23,"length2":15}]],"length":4523,"saved":false}
{"ts":1366819330160,"patch":[[{"diffs":[[0," = \""],[-1,"<br/>"],[0,"Name"]],"start1":3794,"start2":3794,"length1":13,"length2":8}]],"length":4518,"saved":false}
{"ts":1366819378943,"patch":[[{"diffs":[[0,"nput = \""],[1,"<br/> "],[0,"Url:<inp"]],"start1":3848,"start2":3848,"length1":16,"length2":22}]],"length":4524,"saved":false}
{"ts":1366819459266,"patch":[[{"diffs":[[0," = \"Name"],[-1,":"],[0," <input "]],"start1":3794,"start2":3794,"length1":17,"length2":16},{"diffs":[[0,"'name_input'"],[1," class='data'"],[0,"></input>\";\n"]],"start1":3813,"start2":3813,"length1":24,"length2":37},{"diffs":[[0,"br/> Url"],[-1,":"],[0,"<input i"]],"start1":3869,"start2":3869,"length1":17,"length2":16},{"diffs":[[0,"l_input'"],[1," class='data'"],[0,"></input"]],"start1":3890,"start2":3890,"length1":16,"length2":29}]],"length":4548,"saved":false}
