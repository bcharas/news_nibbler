{"ts":1366147047564,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var reddit = \"http://www.reddit.com/.rss\";\nvar digg = \"http://www.digg.com/rss/index.xml\";\nvar cnn = \"http://rss.cnn.com/rss/cnn_topstories.rss\"\nvar hacker_news = \"https://news.ycombinator.com/rss\";\nwindow.feed_src = hacker_news;\n\nwindow.numFeeds = 4;\nwindow.numEntries = 4;\nwindow.this_feed_num = 0;\nwindow.all_feeds_loaded = false;\nwindow.hasPublished = false;\n\ngoogle.load(\"feeds\", \"1\");\n\nfunction default_feeds(){\n\tvar feedList = [];\n\tfeedList.push(reddit);\n\tfeedList.push(digg);\n\tfeedList.push(cnn);\n\tfeedList.push(hacker_news);\n\twindow.feedList = feedList;\n\twindow.num_feeds = window.feedList.length;\n}\n/*\n//handles initial load of feed\nfunction load_feed(){\n\tconsole.log(\"loading feed\");\n    //$(\"#current_src\").text(window.feed_src);\n\tvar feed = new google.feeds.Feed(window.feed_src);\n\tfeed.setNumEntries(window.numEntries);\n\tfeed.load(feedLoaded);\n}\n*/\n\t\t\nfunction load_all_feeds(){\n\tconsole.log(\"loading feeds\");\n\tdefault_feeds();\n\t//window.num_feeds = window.feedList.length;\n\tconsole.log(\"num of feeds: \" + num_feeds);\n\t//window.total_num_entries = 4 * num_feeds;\n\twindow.feeds = [];\n\t\t\n\tfor (var i = 0; i < num_feeds; i++){\n\t\tvar new_feed_src = window.feedList[i];\n\t\tconsole.log(\"loading feed from src: \" + new_feed_src);\n\t\tvar new_feed = new google.feeds.Feed(new_feed_src);\n\t\tnew_feed.setNumEntries(4);\n\t\t\n\t\t//race condition\n\t\t//new_feed.load();\n\t\t\n\t\tnew_feed.load(load_feed_contents);\n\t}\n\t//post_merged_feed();\n}\t\n\nfunction load_next_feed(){\n\twindow.this_feed_num++;\n\tif (window.this_feed_num >= window.numFeeds){\n\t\t//post_merged_feed();\n\t\twindow.all_feeds_loaded = true;\n\t\tconsole.log(\"window.all_feeds_loaded == true\");\n\t\tconsole.log(\"terminal feed\");\n\t\treturn;\n\t}\n\telse{\n\t\tconsole.log(\"feed num: \" + window.this_feed_num);\n\t\tvar feed_to_load = window.feedList[window.this_feed_num];\n\t\tvar new_feed = new google.feeds.Feed(feed_to_load);\n\t\tnew_feed.setNumEntries(4);\n\t\tnew_feed.load(load_feed_contents);\n\treturn;\n\t}\n}\n\nfunction load_feed_contents(result){\n\tconsole.log(\"loading feed contents\");\n\tconsole.log(\"this feed's num before publish: \" + window.this_feed_num);\n\tif (!result.error){\n\t\tvar feed_contents = [];\n\t\tfor (var i = 0; i < result.feed.entries.length; i++) {\t\n\t\t\t//console.log(\"loading feed entry: \" + i);\n\t\t\tvar entry = result.feed.entries[i];\n\t\t\tfeed_contents.push(entry);\n\t\t}\n\t\twindow.feeds.push(feed_contents);\n\t\t//window.num_\n\t\tconsole.log(\"feed loaded\");\n\t\t//if (window.this_feed_num >= window.numFeeds){\n\t\tif ((window.all_feeds_loaded) && (!(window.has_published))){\n\t\t\twindow.has_published = true;\n\t\t\tconsole.log(\"window.has_published == true\");\n\t\t\tconsole.log(\"ALL FEEDS SHOULD BE LOADED\");\n\t\t\tconsole.log(\"\\n publishing from end of load feed contents! \\n\");\n\t\t\tconsole.log(\"this feed's num after publish: \" + window.this_feed_num);\n\t\t\tpost_merged_feed();\n\t\t}\n\t\telse{\n\t\t\tload_next_feed();\n\t\t}\n    }\n\telse{\n\t\t$(\"#current_src\").text(\"ERROR WHILE CONSTRUCTING FEED\");\n\t}\n}\n\n/*\nfunction load_ith_feed(){\n\twindow.\n*/\n\n\nfunction post_merged_feed(){\n\t//for (var i = 0; i < window.total_num_entries){\n\tconsole.log(\"Merging feeds...\");\n\tvar entries_per_feed = 4;\n\tconsole.log(\"num of feeds published: \" + (entries_per_feed * window.num_feeds));\n\tvar entry_num = 0;\n\tfor (var i = 0; i < entries_per_feed; i++){\t\n\t\tfor (var j = 0; j < window.num_feeds; j++){\n\t\t\t//console.log(window.feeds);\n\t\t\tvar this_feed = window.feeds[j];\n\t\t\t//console.log(this_feed);\n\t\t\t//console.log(this_feed[0]);\n\t\t\tvar this_entry = this_feed[i];\n\t\t\tpost_feed_entry(this_entry, entry_num);\n\t\t\tentry_num++;\n\t\t}\n\t}\n}\n\n\n\n/*\nfunction make_feeds(feed_url_list){\n\tfor (var i = 0; i < feed_url_list.length; i++){\n\t\tvar new_feed = new google.feeds.Feed(window.feed_src);\n*/\t\t\n/*\n//loads a feed, posts to page\nfunction feedLoaded(result){\n\tif (!result.error){\n\t\tvar container = $(\"#feed_container\");\n\t\tcontainer.innerHTML = \"\";\n\t\tfor (var i = 0; i < result.feed.entries.length; i++) {\n\t\t\t\n\t\t\tvar entry = result.feed.entries[i];\n\t\t\tvar id = i;\n\t\t\tpost_feed_entry(entry, id);\n\t\t}        \n    }\n\telse{\n\t\t$(\"#current_src\").text(\"ERROR WHILE CONSTRUCTING FEED\");\n\t}\n}\n*/\n\n//given a feed entry, posts it too page\nfunction post_feed_entry(entry, id){\n\t//console.log(\"posting...\");\n\t//console.log(entry.title);\n\t//console.log(entry);\n\tvar div_class = \"listing\";\n\tvar new_div_html = \"<div id=\" + id + \" class='listing'> </div>\";\n\tvar container = $(\"#feed_container\");\n\tcontainer.append(new_div_html);\n\tvar div = $(\"#\" + id);\n\tdiv.html(\"<div class='headline'>\" + entry.title + \"</div>\");\n\tif ((entry.date !== undefined) && (entry.date !== \"\")){\n\t\tdiv.append(\"<br/>\" + \"<div class='date'>\" + entry.publishedDate + \"</div>\");\n\t}\n\tif ((entry.contentSnippet !== undefined) && (entry.contentSnippet !== \"\")){\n\t\tdiv.append(\"<br/>\" + \"<div class='snippet'>\" + entry.contentSnippet + \"</div>\");\n\t}\n\tif ((entry.link !== undefined) && (entry.link !== \"\")){\n\t\tdiv.append(\"<br/>\" + \"<div class='date'>\" + entry.link + \"</div>\");\n\t}\n\tdiv.click(function(){\n\t\t\t\tconsole.log(\"opening...\");\n\t\t\t\tconsole.log(entry.link);\n\t\t\t\twindow.open(entry.link);\n\t\t\t});\n}\n/*\n//allows interaction with feed control buttons\nfunction build_controller(){\n\tvar controller = $(\"#controller\");\n\tvar reddit_button = $(\"#reddit\");\n\treddit_button.click(function(){\n\t\t\t\t\t\t\tbuild_feed(reddit, 4);\n\t\t\t\t\t\t});\n\tvar cnn_button = $(\"#cnn\");\n\tcnn_button.click(function(){\n\t\t\t\t\t\t\tbuild_feed(cnn, 4);\n\t\t\t\t\t\t});\n\tvar hack_button = $(\"#hacker_news\");\n\thack_button.click(function(){\n\t\t\t\t\t\t\tbuild_feed(hacker_news, 4);\n\t\t\t\t\t\t});\n\t$(\"#generate_feed_button\").click(function(){\n\t\t\t\t\t\t\t\t\t\tgenerate_feed();\n\t\t\t\t\t\t\t\t\t});\n}\n*/\n/*\n//resets and rebuilds the feed\nfunction build_feed(feed_url, numEntries){\n\twindow.numEntries = numEntries;\n\twindow.feed_src = feed_url;\n\t$(\"#feed\").empty();\n\t$(\"#def_feed\").val(\"\");\n\t$(\"#def_numEntries\").val(\"\");\n\t//$(\"#current_src\").text(\"Current Feed: \" + window.feed_src);\n\t$(\"#current_src\").text(window.feed_src);\n\tload_feed();\n\t//onLoad();\n}\n*/\n/*\n//builds user defined feed\nfunction generate_feed(){\n\tvar new_feed_src = $(\"#def_feed\").val();\n\tvar new_numEntries = $(\"#def_numEntries\").val();\n\tif (new_feed_src !== \"\"){\n\t\twindow.feed_src = new_feed_src;\n\t}\n\tif (new_numEntries !== \"\"){\n\t\twindow.numEntries = new_numEntries;\n\t}\n\tbuild_feed(window.feed_src, window.numEntries);\n}\n*/\n//build_controller();\t\t\t\t\t\t\n\ngoogle.setOnLoadCallback(load_all_feeds);\n"]],"start1":0,"start2":0,"length1":0,"length2":6311}]],"length":6311}
{"ts":1366147816529,"patch":[[{"diffs":[[0,".link);\n"],[1,"                closeContainers();\n"],[0,"        "]],"start1":4981,"start2":4981,"length1":16,"length2":51}]],"length":6420,"saved":false}
{"ts":1366147842496,"patch":[[{"diffs":[[0,"        $(\"#"],[-1,"feed"],[1,"article"],[0,"_container\")"]],"start1":5032,"start2":5032,"length1":28,"length2":31}]],"length":6423,"saved":false}
